# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django API

## üîå –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–ë–∞–∑–æ–≤—ã–π URL API**: `http://127.0.0.1:8000/api/v1/`
- **CORS —Ä–∞–∑—Ä–µ—à—ë–Ω** –¥–ª—è: `http://127.0.0.1:8001`, `http://localhost:8001`
- **–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤**: `Content-Type: application/json`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–¥–∞—á–∏ `user_id` –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞

---

## üß© –°—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

| –î–µ–π—Å—Ç–≤–∏–µ       | –≠–Ω–¥–ø–æ–∏–Ω—Ç    | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞                                                                                                                        |
| ---------------------- | ------------------- | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| –í—Ö–æ–¥               | `/auth/login/`    | POST       | ``json { "email": "student1@edu.ru", "password": "123" }``                                                                                         |
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | `/auth/register/` | POST       | ``json { "email": "new@user.ru", "first_name": "–ò–≤–∞–Ω", "last_name": "–ò–≤–∞–Ω–æ–≤", "phone": "+79991234567", "password_hash": "mypassword" }`` |

‚úÖ **–û—Ç–≤–µ—Ç –ø—Ä–∏ –≤—Ö–æ–¥–µ**:

```json
{
  "user_id": 5,
  "email": "student1@edu.ru",
  "first_name": "–ú–∞—Ä–∏—è",
  "last_name": "–ò–≤–∞–Ω–æ–≤–∞",
  "avatar_url": "https://a.com/mary.jpg",
  "roles": [3]
}
```

> –†–æ–ª–∏: `[1]` ‚Äî –∞–¥–º–∏–Ω, `[2]` ‚Äî –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, `[3]` ‚Äî —Å—Ç—É–¥–µ–Ω—Ç

---

### 2. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

| –î–∞–Ω–Ω—ã–µ              | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| ------------------------- | ---------------- | ---------- | -------------------- |
| –°–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ | `/courses/`    | GET        | ‚Äî                   |

‚úÖ **–ß—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ**:

- `title`, `short_desc`, `price`, `thumbnail_url`
- `instructor` ‚Üí `{ first_name, last_name, avatar_url }`

---

### 3. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç—É–¥–µ–Ω—Ç–∞)

| –î–∞–Ω–Ω—ã–µ                  | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
| ----------------------------- | ---------------- | ---------- | ------------------ |
| –ü—Ä–æ—Ñ–∏–ª—å + –∑–∞–ø–∏—Å–∏ | `/profile/`    | GET        | `?user_id=5`     |

‚úÖ **–û—Ç–≤–µ—Ç**:

```json
{
  "user": { "id": 5, "first_name": "–ú–∞—Ä–∏—è", ... },
  "enrollments": [
    {
      "course": { "title": "Python", "slug": "python", ... },
      "progress_pct": 100,
      "status": "completed"
    }
  ]
}
```

---

### 4. –ü—Ä–æ—Ñ–∏–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è

| –î–∞–Ω–Ω—ã–µ         | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã   |
| -------------------- | ---------------- | ---------- | -------------------- |
| –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è | `/users/3/`    | GET        | ‚Äî                   |
| –ï–≥–æ –∫—É—Ä—Å—ã    | `/courses/`    | GET        | `?instructor_id=3` |

---

### 5. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä—Å–∞ (–ø—É–±–ª–∏—á–Ω–∞—è)

| –î–∞–Ω–Ω—ã–µ                      | –≠–Ω–¥–ø–æ–∏–Ω—Ç     | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                    |
| --------------------------------- | -------------------- | ---------- | ------------------------------------- |
| –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è | `/courses/{slug}/` | GET        | –ù–∞–ø—Ä–∏–º–µ—Ä:`/courses/python/` |

‚úÖ **–í –æ—Ç–≤–µ—Ç–µ**:

- –í—Å–µ –º–æ–¥—É–ª–∏ ‚Üí —É—Ä–æ–∫–∏
- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å
- `average_rating` (—Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞)
- `ratings` ‚Üí —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏ –∞–≤—Ç–æ—Ä–æ–≤

---

### 6. –ü–æ–∫—É–ø–∫–∞ / –∑–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å

| –î–µ–π—Å—Ç–≤–∏–µ     | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞                               |
| -------------------- | ---------------- | ---------- | --------------------------------------------------------- |
| –ó–∞–ø–∏—Å–∞—Ç—å—Å—è | `/enroll/`     | POST       | ``json { "user_id": 5, "course_id": 1 }``                 |
| –û–ø–ª–∞—Ç–∏—Ç—å     | `/payment/`    | POST       | ``json { "user_id": 5, "course_id": 1, "amount": 2990 }`` |

> ‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å—å, –ø–æ—Ç–æ–º –ø–ª–∞—Ç—ë–∂ (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç ‚Äî –ø–æ –ª–æ–≥–∏–∫–µ –ø—Ä–æ–µ–∫—Ç–∞)

---

### 7. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±—É—á–µ–Ω–∏—è (–≤–Ω—É—Ç—Ä–∏ –∫—É—Ä—Å–∞)

| –î–∞–Ω–Ω—ã–µ                  | –≠–Ω–¥–ø–æ–∏–Ω—Ç     | –ú–µ—Ç–æ–¥ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
| ----------------------------- | -------------------- | ---------- | ------------------ |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫—É—Ä—Å–∞ | `/courses/{slug}/` | GET        | `?user_id=5`     |

‚úÖ –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ `user_id`:

- –£—Ä–æ–∫–∏ —Å `is_locked: true` —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è (–µ—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

---

### 8. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–∞

> –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ –∫—É—Ä—Å–∞** (—Å–º. –ø. 7).
> –û—Ç–¥–µ–ª—å–Ω–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –Ω–µ—Ç ‚Äî –≤—Å—ë –≤–ª–æ–∂–µ–Ω–æ.

‚úÖ –í —É—Ä–æ–∫–µ –µ—Å—Ç—å:

- `content`, `video_url`
- `assignment` (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–º–∞—à–∫–∞)
- `submissions` (—Ä–µ—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

### 9. –û—Ç–∑—ã–≤—ã –∏ –æ—Ü–µ–Ω–∫–∏

| –î–µ–π—Å—Ç–≤–∏–µ     | –≠–Ω–¥–ø–æ–∏–Ω—Ç                       | –ú–µ—Ç–æ–¥ | –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞                                                          |
| -------------------- | -------------------------------------- | ---------- | ------------------------------------------------------------------------------------ |
| –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å | –≤–ª–æ–∂–µ–Ω–æ –≤ `/courses/{slug}/` | ‚Äî         | ‚Äî                                                                                   |
| –û—Å—Ç–∞–≤–∏—Ç—å     | `/ratings/`                          | POST       | ``json { "user_id": 5, "course_id": 1, "rating": 5, "comment": "–û—Ç–ª–∏—á–Ω–æ!" }`` |

> ‚ö†Ô∏è –û—Ü–µ–Ω–∏—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ –ë–î)

---

## üõ† –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ë—ç–∫–µ–Ω–¥

```bash
cd backend
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥

```bash
cd frontend
python3 -m http.server 8001
```

–û—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ—Ä–æ–Ω—Ç –ø–æ: `http://127.0.0.1:8001`

---

## üìÅ –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã

- **–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**:`student1@edu.ru` (user_id=5), `nikita@edu.ru` (user_id=1, –∞–¥–º–∏–Ω)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL –≤ Docker (`docker-compose up -d`)
- **API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ `http://127.0.0.1:8000/api/v1/`

---

## ‚ùó –í–∞–∂–Ω–æ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞

1. **–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏ —Ç—Ä–µ–±—É—é—Ç `user_id`** –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
2. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** ‚Äî –æ–Ω–∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∏–∑ API
3. **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (`roles`) –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —á—Ç–æ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
   - `[1]` ‚Äî –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –∫—É—Ä—Å—ã
   - `[3]` ‚Äî —Ç–æ–ª—å–∫–æ —Å–º–æ—Ç—Ä–µ—Ç—å –∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã
4. **–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è** ‚Äî –≤ `enrollments.progress_pct`
